function (addAssImp target)
    set(ASSIMP_BUILD_ASSIMP_TOOLS OFF CACHE BOOL "" FORCE)
    set(ASSIMP_BUILD_SAMPLES OFF CACHE BOOL "" FORCE)
    set(ASSIMP_BUILD_TESTS OFF CACHE BOOL "" FORCE)
    set(ASSIMP_BUILD_ZLIB ON CACHE BOOL "" FORCE)
    if ((NOT EXISTS ${CMAKE_BINARY_DIR}/AssImpFOUND) AND EXISTS ${CMAKE_SOURCE_DIR}/deps/assimp)
        add_subdirectory(${CMAKE_SOURCE_DIR}/deps/assimp ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/assimp)
    endif ()
    target_include_directories(${target} PUBLIC ${CMAKE_SOURCE_DIR}/deps/assimp/contrib/stb_image ${CMAKE_SOURCE_DIR}/deps/assimp/include ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/assimp/include)
    target_link_libraries(${target} PUBLIC assimp)
    add_dependencies(${target} assimp)
    file(TOUCH ${CMAKE_BINARY_DIR}/AssImpFOUND)
endfunction ()

function (addGLM target)
    if ((NOT EXISTS ${CMAKE_BINARY_DIR}/GLMFOUND) AND EXISTS ${CMAKE_SOURCE_DIR}/deps/glm)
        add_subdirectory(${CMAKE_SOURCE_DIR}/deps/glm ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/glm)
    endif ()
    target_include_directories(${target} PUBLIC ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/glm)
    target_link_libraries(${target} PUBLIC glm)
    add_dependencies(${target} glm)
    file(TOUCH ${CMAKE_BINARY_DIR}/GLMFOUND)
endfunction ()

function (addGLFW target)
    set(GLFW_BUILD_DOCS OFF CACHE BOOL "" FORCE)
    set(GLFW_BUILD_TESTS OFF CACHE BOOL "" FORCE)
    set(GLFW_BUILD_EXAMPLES OFF CACHE BOOL "" FORCE)
    if ((NOT EXISTS ${CMAKE_BINARY_DIR}/GLFWFOUND) AND EXISTS ${CMAKE_SOURCE_DIR}/deps/glfw)
        add_subdirectory(${CMAKE_SOURCE_DIR}/deps/glfw ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/glfw)
    endif ()
    target_include_directories(${target} PUBLIC ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/glfw/include)
    target_link_libraries(${target} PUBLIC glfw)
    add_dependencies(${target} glfw ${GLFW_LIBRARIES})
    file(TOUCH ${CMAKE_BINARY_DIR}/GLFWFOUND)
endfunction ()

add_subdirectory(OpenGL)
add_subdirectory(Vulkan)
add_subdirectory(Merged)
add_executable(IEGraphicsModule IEGraphicsModuleMain.cpp)
add_dependencies(IEGraphicsModule IEGraphicsModuleOpenGL)
add_dependencies(IEGraphicsModule IEGraphicsModuleVulkan)
add_dependencies(IEGraphicsModule IEGraphicsModuleMerged)
add_dependencies(IEGraphicsModule IELogModule)
addAssImp(IEGraphicsModule)
addGLEW(IEGraphicsModule)
addGLM(IEGraphicsModule)
addLog4cplus(IEGraphicsModule)
addVulkan(IEGraphicsModule)
addGLFW(IEGraphicsModule)
target_include_directories(IEGraphicsModule PUBLIC ${CMAKE_SOURCE_DIR}/src)